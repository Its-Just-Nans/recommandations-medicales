<div class="my-4" id="score-fagerstrom">
  <h3 class="card-title">Test de Fagerström de dépendance à la nicotine</h3>
  <fieldset class="mt-4">
    <legend>1. Le matin, combien de temps après vous être réveillé fumez-vous votre première cigarette&nbsp;?</legend>
    <input type="radio" id="fagerstrom-11" name="radio-fagerstrom-1" class="d-input-none" value="3" required>
    <label for="fagerstrom-11" class="chip chip-action chip-sm chip-choice">Dans les 5 minutes</label>
    <input type="radio" id="fagerstrom-12" name="radio-fagerstrom-1" class="d-input-none" value="2">
    <label for="fagerstrom-12" class="chip chip-action chip-sm chip-choice">6 à 30 minutes</label>
    <input type="radio" id="fagerstrom-13" name="radio-fagerstrom-1" class="d-input-none" value="1">
    <label for="fagerstrom-13" class="chip chip-action chip-sm chip-choice">31 à 60 minutes</label>
    <input type="radio" id="fagerstrom-14" name="radio-fagerstrom-1" class="d-input-none" value="0">
    <label for="fagerstrom-14" class="chip chip-action chip-sm chip-choice">+60 minutes</label>
  </fieldset>
  <fieldset>
    <legend>2. Trouvez-vous qu'il est difficile de vous abstenir de fumer dans les endroits où c'est interdit (par exemple cinémas, bibliothèques)&nbsp;?</legend>
    <input type="radio" id="fagerstrom-21" name="radio-fagerstrom-2" class="d-input-none" value="1" required>
    <label for="fagerstrom-21" class="chip chip-action chip-sm chip-choice">Oui</label>
    <input type="radio" id="fagerstrom-22" name="radio-fagerstrom-2" class="d-input-none" value="0">
    <label for="fagerstrom-22" class="chip chip-action chip-sm chip-choice">Non</label>
  </fieldset>
  <fieldset>
    <legend>3. À quelle cigarette renonceriez-vous le plus difficilement&nbsp;?</legend>
    <input type="radio" id="fagerstrom-31" name="radio-fagerstrom-3" class="d-input-none" value="1" required>
    <label for="fagerstrom-31" class="chip chip-action chip-sm chip-choice">La première de la journée</label>
    <input type="radio" id="fagerstrom-32" name="radio-fagerstrom-3" class="d-input-none" value="0">
    <label for="fagerstrom-32" class="chip chip-action chip-sm chip-choice">Une autre</label>
  </fieldset>
  <fieldset>
    <legend>4. Combien de cigarettes fumez-vous par jour, en moyenne&nbsp;?</legend>
    <input type="radio" id="fagerstrom-41" name="radio-fagerstrom-4" class="d-input-none" value="0" required>
    <label for="fagerstrom-41" class="chip chip-action chip-sm chip-choice">10 ou moins</label>
    <input type="radio" id="fagerstrom-42" name="radio-fagerstrom-4" class="d-input-none" value="1">
    <label for="fagerstrom-42" class="chip chip-action chip-sm chip-choice">11 à 20</label>
    <input type="radio" id="fagerstrom-43" name="radio-fagerstrom-4" class="d-input-none" value="2">
    <label for="fagerstrom-43" class="chip chip-action chip-sm chip-choice">21 à 30</label>
    <input type="radio" id="fagerstrom-44" name="radio-fagerstrom-4" class="d-input-none" value="3">
    <label for="fagerstrom-44" class="chip chip-action chip-sm chip-choice">31 ou plus</label>
  </fieldset>
  <fieldset>
    <legend>5. Fumez-vous à intervalles plus rapprochés durant les premières heures de la matinée que durant le reste de la journée&nbsp;?</legend>
    <input type="radio" id="fagerstrom-51" name="radio-fagerstrom-5" class="d-input-none" value="1" required>
    <label for="fagerstrom-51" class="chip chip-action chip-sm chip-choice">Oui</label>
    <input type="radio" id="fagerstrom-52" name="radio-fagerstrom-5" class="d-input-none" value="0">
    <label for="fagerstrom-52" class="chip chip-action chip-sm chip-choice">Non</label>
  </fieldset>
  <fieldset>
    <legend>6. Fumez-vous lorsque vous êtes malades au point de rester au lit presque toute la journée&nbsp;?</legend>
    <input type="radio" id="fagerstrom-61" name="radio-fagerstrom-6" class="d-input-none" value="1" required>
    <label for="fagerstrom-61" class="chip chip-action chip-sm chip-choice">Oui</label>
    <input type="radio" id="fagerstrom-62" name="radio-fagerstrom-6" class="d-input-none" value="0">
    <label for="fagerstrom-62" class="chip chip-action chip-sm chip-choice">Non</label>
  </fieldset>
  <div class="alert bg-light d-flex mt-md-4">
    <div class="d-flex flex-column align-items-center">
      <p class="typography-overline score-output-title">Fagerström</p>
      <output class="score-output" id="fagerstromScore">0</output>
    </div>
    <p id="fagerstromText" class="lead m-auto">Veuillez répondre à toutes les questions</p>
  </div>
</div>
<blockquote>
  <p>
    <a href="https://pubmed.ncbi.nlm.nih.gov/1932883/" rel="external nofollow noopener">
      Heatherton TF, Kozlowski LT, Frecker RC, Fagerström KO. The Fagerström Test for Nicotine Dependence: a revision of the Fagerström Tolerance Questionnaire. Br J Addict. 1991;86(9):1119-1127.</a>
      et
    <a href="https://pubmed.ncbi.nlm.nih.gov/735910/" rel="external nofollow noopener">
      Fagerström KO. Measuring degree of physical dependence to tobacco smoking with reference to individualization of treatment. Addict Behav. 1978;3(3-4):235-241.
    </a>
  </p>
</blockquote>
{{ $script := `
  // Score de Fagerström by djibe
  document.addEventListener( 'DOMContentLoaded', event => {
    const scoreFagerstrom = document.getElementById('fagerstromScore')
    const textFagerstrom = document.getElementById('fagerstromText');
    [...document.querySelectorAll('#score-fagerstrom input[type=\"radio\"]')].forEach((elem) => { elem.addEventListener('click', () => calcFagerstrom() ) })
    const calcFagerstrom = () => {
      let score = 0
      const elemsChecked = document.querySelectorAll('#score-fagerstrom input[type=\"radio\"]:checked')
      elemsChecked.forEach(elemChecked => {
        score += parseInt(elemChecked.value, 10)
        if (elemsChecked.length >= 6) {
          scoreFagerstrom.innerHTML = score
          if (score <= 2) { textFagerstrom.innerHTML = 'Pas de dépendance' }
          else if (score >= 3 && score <= 4) { textFagerstrom.innerHTML = 'Dépendance faible' }
          else if (score >= 5 && score <= 6) { textFagerstrom.innerHTML = 'Dépendance moyenne' }
          else if (score >= 6 && score <= 7) { textFagerstrom.innerHTML = 'Dépendance forte ou très forte' }
        }
      })
    }
  })` }}
<script>{{ $script | safeJS }}</script>
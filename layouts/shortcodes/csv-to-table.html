<!-- Generate a random id for the table (a11y purpose) -->
{{ $id := "" }}
  {{ with .Get "id" }}
    {{ $id = . }}
  {{ else }}
  {{ $id = delimit (shuffle (seq 1 9)) "" }}
  {{ $id = printf "t-%s"  $id}}
  {{ end }}
{{ with $file := .Get "file" }}
  {{ with resources.Get $file }}
    {{ with . | transform.Unmarshal }}
      <table class="table" id="{{ if $id }}{{ printf "%s" $id }}{{ end }}">
        <thead>
          <tr>
            {{ range index . 0 }}
              <th scope="col">{{ . }}</th>
            {{ end }}
          </tr>
        </thead>
        <tbody>
          {{ range after 1 . }}
            <tr>
              {{ range first 1 . }}
                <th scope="row">{{ . }}</th>
              {{ end }}
              {{ range after 1 . }}
                <td>{{ . }}</td>
              {{ end }}
            </tr>
          {{ end }}
        </tbody>
      </table>
    {{ end }}
  {{ else }}
    {{ errorf "The %q shortcode was unable to find %s. See %s" $.Name $file $.Position }}
  {{ end }}
{{ else }}
  {{ errorf "The %q shortcode requires one positional argument, the path to the CSV file relative to the assets directory. See %s" .Name .Position }}
{{ end }}
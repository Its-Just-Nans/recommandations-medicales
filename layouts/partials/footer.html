<div class="fab-actions">
  <button class="d-none d-lg-flex btn btn-primary btn-float btn-float-extended" type="button" data-toggle="modal"
    data-target="#modal-contact">
    <span class="material-icons">message</span>Commenter</button>
  <button class="d-lg-none btn btn-primary btn-float" type="button" data-toggle="modal" data-target="#modal-contact">
    <span class="material-icons">message</span></button>
</div>

<!-- Modal -->
<div class="modal fade" id="modal-contact" tabindex="-1" role="dialog" aria-labelledby="modal-contact-title"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modal-contact-title">Commentaires</h5>
      </div>
      <form name="contact" method="post" netlify>
        <div class="modal-body">
          Une suggestion, une remarque ou une critique ? Dites-le.
          <div class="form-group mt-4">
            <div class="input-group">
              <input class="form-control" placeholder="Mon adresse email" type="email" name="email" autocomplete="email"
                required>
              <span class="input-group-icon">
                <i class="material-icons">mail</i>
              </span>
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <textarea class="form-control" placeholder="Commentaires et remarques" rows="5" name="message" required></textarea>
              <span class="input-group-icon">
                <i class="material-icons">create</i>
              </span>
            </div>
          </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Annuler</button>
          <button type="submit" class="btn btn-primary">Envoyer</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script src="{{ .Site.Params.cdn.jquery }}" {{ printf "integrity=%q" .Site.Params.cdn.jquery_hash | safeHTMLAttr }}
  crossorigin="anonymous"></script>
<script src="{{ .Site.Params.cdn.bs_js }}" {{ printf "integrity=%q" .Site.Params.cdn.bs_js_hash | safeHTMLAttr }}
  crossorigin="anonymous" defer></script>
<script src="{{ .Site.Params.cdn.material_js}}" defer></script>
<script src="https://cdn.jsdelivr.net/npm/lunr@2.3.8/lunr.min.js"
  integrity="sha256-34Si1Y6llMBKM3G0jQILVeoQKEwuxjbk4zGWXXMT4ps=" crossorigin="anonymous" defer></script>
<script src="https://instant.page/5.1.0" type="module" integrity="sha384-by67kQnR+pyfy8yWP4kPO12fHKRLHZPfEsiSXR8u2IKcTdxD805MGUXBzVPnkLHw" crossorigin="anonymous"></script>

{{ if .IsPage }}
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  // https://mermaid-js.github.io/mermaid/#/Setup?id=fontfamily
  const mermaidConfig = {
    fontFamily: 'Roboto',
    fontSize: '1rem',
    defaultLinkColor: '#6200ee',
    nodeTextColor: 'rgba(0,0,0,0.87)',
    logLevel: 1,
    startOnLoad: true,
    securityLevel:'loose',
    //themeCSS: ".node rect {fill: rgba(98, 0, 238, 0.08); stroke: var(--primary); stroke-width: 0.5px; filter: drop-shadow(2px 2px 3px rgba(0, 0, 0, 0.14));} .edgePath .path {stroke: #6200ee;}",
    themeCSS: ".node rect {fill: #F1E9FC; stroke-width: 0;} .edgePath {opacity: 0.30 !important} .edgePath .path {stroke-width: 2px;}",
    flowchart: {
      curve: 'Basis',
      htmlLabels: true,
      nodeSpacing: 30,
      rankSpacing: 40,
    }
  };

  mermaid.initialize(mermaidConfig);
  </script>
{{end}}

<!--<script src="{{.Site.BaseURL}}js/search.js"></script>-->

<script>
  $(function() {

    $('.breadcrumb-item:last-of-type').addClass('active').find('a').each(function() {
      let linkText = $(this).text();
      $(this).before(linkText);
      $(this).remove();
    });

    $('[data-toggle="tooltip"]').tooltip({
      container: 'body',
      html: true,
      placement: 'bottom'
    });
    $('[data-toggle="popover"]').popover({
      html: true
    });
    $('.popover-hover').popover({
      html: true,
      trigger: 'hover',
      placement: 'bottom',
      container: 'body',
      delay: {
        show: 500
      }
    });

    // Paragraphs
    $('.recommandation__content p').addClass('typography-body-1');

    // Lists
    $('.recommandation__content > ul:not(.list-group) > li').addClass('typography-body-1');
    $('.recommandation__content .list-group').addClass('mb-4').css("width","min(100%, 768px)");
    $('.recommandation__content .list-group li:not(.list-group-divider)').addClass('list-group-item list-group-item-action');

    $('.recommandation__content .collapse:last-of-type a').prop('target', '_blank').prop('rel',
      'nofollow noopener');
  });

</script>
